{% extends 'base.html' %}

{% block content %}
  <h3>COVID Vaccination Data Exploration</h3>
  <p class="font-italic">This is a brief description of our project...</p>
  <section>
    <h1>Predictions</h1>
    <p>Selected State: {{ state }}</p>

    <div class="dropdown">
      <button class="btn btn-info dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Select State
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        {% for state_name in states.keys() %}
        <a class="dropdown-item" href="/state/{{ states[state_name]}}">{{ state_name }}</a>
        {% endfor %}
      </div>
    </div>

    <!-- TODO create prediction graph (like https://plotly.com/javascript/continuous-error-bars/) -->
    <div class="row pt-5">
      <div class="col">
        <div id="prediction_dataviz"></div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div id="vaccine_dataviz"></div>
      </div>
    </div>
    <script>
      // convert the data from json to a JS object
      var dailyCases = {{ daily_cases|tojson }};
      var dailyVaccinations = {{ daily_vaccinations|tojson }};
      var futureVaccinations = {{ future_vaccinations|tojson }}
      
      // create the visualizations
      render_prediction_visualization(dailyCases)
      render_vaccine_visualization(dailyVaccinations, futureVaccinations)
    </script>
  </section>
  <section>
    <h1>Data Exploration</h1>
    <!-- TODO: make exploration graphs-->
    <!-- Potential exploration graph type https://plotly.com/javascript/splom/ -->
    <!-- Basic scatterplot https://plotly.com/javascript/line-and-scatter/-->
  </section>
{% endblock %}